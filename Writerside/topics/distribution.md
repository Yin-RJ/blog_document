# 分布式事务

## CAP理论
![cap.png](../images/cap.png)
- Consistency：一致性，所有节点访问同一份最新的数据副本
- Availability: 可用性，非故障节点在合理的时间内返回合理的响应（不是错误或者超时响应）
- Partition Tolerance: 分区容错性，分布式系统出现网络分区时，仍然可以对外提供网络服务
> 网络分区：分布式系统中，多个节点之前的网络本来是连通的，但由于发生了某些故障，某些节点之间连不通了，整个网络就分成了几块区域，即发生了网络分区

> 在网络分区发生的情况下，我们如果要继续服务，那么强一致性和可用性就只能2选一。也就是说当网络分区发生的情况下，P是前提，在决定了P之后才需要考虑A
> 和C的取舍，也就是说在分布式系统中，分区容错性是必须要保证的，如果系统没有发生分区，那么也就不存在分区容错性，此时一致性和可用性是可以同时保证的

**在决定了P之后，CA无法同时实现**
如果系统发生和分区，系统中某个节点发生了写操作，如果要保证C（一致性），那么就需要禁止其他节点的读写，此时就违背了A（可用性）；如果要保证A
（可用性），那么其他节点读写就是正常的，这种情况下数据就会有不一致的情况，也就违背了C（一致性）